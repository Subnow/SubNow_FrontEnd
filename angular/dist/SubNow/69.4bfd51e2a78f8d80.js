"use strict";(self.webpackChunkSubNow=self.webpackChunkSubNow||[]).push([[69],{1069:(it,v,r)=>{r.r(v),r.d(v,{CustomersModule:()=>ot});var m=r(6814),b=r(5525),t=r(9212);let q=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-customers"]],decls:1,vars:0,template:function(i,a){1&i&&t._UZ(0,"router-outlet")},dependencies:[b.lC]})}return o})();var c=r(6806),s=r(95),d=r(3251);function _(o){const{day:n,month:e,year:i}=o;return`${n.toString().padStart(2,"0")}/${e.toString().padStart(2,"0")}/${i}`}var T=r(4716);function x(o){let n=o,e=n.indexOf(" ");return n.substring(e+1)}function L(o){const n=new Date(o);return{year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()}}var S=r(2351),p=r(7757);let C=(()=>{class o{constructor(e){this.restService=e,this.apiName="Default",this.create=(i,a)=>this.restService.request({method:"POST",url:"/api/app/customer",body:i},{apiName:this.apiName,...a}),this.delete=(i,a)=>this.restService.request({method:"DELETE",url:`/api/app/customer/${i}`},{apiName:this.apiName,...a}),this.get=(i,a)=>this.restService.request({method:"GET",url:`/api/app/customer/${i}`},{apiName:this.apiName,...a}),this.getFilteredCustomers=(i,a)=>this.restService.request({method:"GET",url:"/api/app/customer/filtered-customers",params:{status:i.status,plan:i.plan,searchTerm:i.searchTerm}},{apiName:this.apiName,...a}),this.getList=(i,a)=>this.restService.request({method:"GET",url:"/api/app/customer",params:{sorting:i.sorting,skipCount:i.skipCount,maxResultCount:i.maxResultCount}},{apiName:this.apiName,...a}),this.update=(i,a)=>this.restService.request({method:"PUT",url:"/api/app/customer",body:i},{apiName:this.apiName,...a})}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(p.vgb))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),N=(()=>{class o{constructor(e){this.restService=e,this.apiName="Default",this.getAll=i=>this.restService.request({method:"GET",url:"/api/app/country"},{apiName:this.apiName,...i})}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(p.vgb))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var U=r(2425),f=r(1411),h=r(9193);function G(o,n){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(),t.Oqu(null==e.customer?null:e.customer.name)}}function O(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()),2&o&&(t.xp6(),t.Oqu(t.lcZ(2,1,"General::newCustomer")))}function z(o,n){if(1&o&&(t.TgZ(0,"div",59)(1,"span",60),t._uU(2),t.qZA(),t.TgZ(3,"span",61),t._uU(4),t.qZA()()),2&o){const e=n.item;t.xp6(2),t.Oqu(null==e?null:e.code),t.xp6(2),t.Oqu(null==e?null:e.name)}}function E(o,n){1&o&&(t.TgZ(0,"div",62)(1,"div",28)(2,"label",29),t._uU(3),t.ALo(4,"abpLocalization"),t.qZA(),t.TgZ(5,"div",30),t._UZ(6,"input",63)(7,"i",32),t.ALo(8,"abpLocalization"),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"General::companyRegistrationNumber")),t.xp6(4),t.s9C("ngbTooltip",t.lcZ(8,4,"General::companyRegistrationNumberTooltip")))}function I(o,n){1&o&&(t.TgZ(0,"div",27)(1,"div",28)(2,"label",29),t._uU(3),t.ALo(4,"abpLocalization"),t.qZA(),t.TgZ(5,"div",30),t._UZ(6,"input",64)(7,"i",32),t.ALo(8,"abpLocalization"),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"General::taxID")),t.xp6(4),t.s9C("ngbTooltip",t.lcZ(8,4,"General::taxIDTooltip")))}function J(o,n){if(1&o&&(t.TgZ(0,"div",65),t._UZ(1,"img",66),t.TgZ(2,"span",61),t._uU(3),t.qZA()()),2&o){const e=n.item;t.xp6(),t.Q6J("src",null==e?null:e.flagUrl,t.LSH),t.xp6(2),t.Oqu(null==e?null:e.name)}}function w(o,n){if(1&o&&(t.TgZ(0,"div",65),t._UZ(1,"img",66),t.TgZ(2,"span",61),t._uU(3),t.qZA()()),2&o){const e=n.item;t.xp6(),t.Q6J("src",null==e?null:e.flagUrl,t.LSH),t.xp6(2),t.Oqu(null==e?null:e.name)}}const F=(o,n)=>[o,n],M=()=>({standalone:!0});function k(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",21)(1,"div",22)(2,"div",23)(3,"p",24),t._uU(4),t.ALo(5,"abpLocalization"),t.qZA()(),t.TgZ(6,"div",25)(7,"div",26)(8,"div",27)(9,"div",28)(10,"label",29),t._uU(11),t.ALo(12,"abpLocalization"),t.qZA(),t.TgZ(13,"div",30),t._UZ(14,"input",31)(15,"i",32),t.ALo(16,"abpLocalization"),t.qZA()()(),t.TgZ(17,"div",27)(18,"div",28)(19,"label",29),t._uU(20),t.ALo(21,"abpLocalization"),t.qZA(),t.TgZ(22,"input",33),t.NdJ("keydown.space",function(a){return a.preventDefault()}),t.qZA(),t.TgZ(23,"span",34),t._uU(24),t.ALo(25,"abpLocalization"),t.qZA()()(),t.TgZ(26,"div",27)(27,"div",28)(28,"label",29),t._uU(29),t.ALo(30,"abpLocalization"),t.qZA(),t._UZ(31,"textarea",35),t.ALo(32,"abpLocalization"),t.qZA()(),t.TgZ(33,"div",27)(34,"div",26)(35,"div",36)(36,"div",37)(37,"label",29),t._uU(38),t.ALo(39,"abpLocalization"),t.qZA(),t.TgZ(40,"div",30)(41,"input",38,39),t.NdJ("focus",function(){t.CHM(e);const a=t.MAs(42);return t.KtG(a.toggle())}),t.qZA(),t.TgZ(43,"i",40),t.NdJ("click",function(){t.CHM(e);const a=t.MAs(42);return t.KtG(a.toggle())}),t._UZ(44,"i",41),t.qZA()()()(),t.TgZ(45,"div",36)(46,"div",37)(47,"label",29),t._uU(48),t.ALo(49,"abpLocalization"),t.qZA(),t.TgZ(50,"div",30),t._UZ(51,"input",42,39),t.TgZ(53,"i",43),t._UZ(54,"i",41),t.qZA()()()()()()()()(),t.TgZ(55,"div",22)(56,"div",23)(57,"p",24),t._uU(58),t.ALo(59,"abpLocalization"),t.qZA()(),t.TgZ(60,"div",25)(61,"div",26)(62,"div",27)(63,"div",28)(64,"label",29),t._uU(65),t.ALo(66,"abpLocalization"),t.qZA(),t.TgZ(67,"div",30),t._UZ(68,"input",44)(69,"i",32),t.ALo(70,"abpLocalization"),t.qZA(),t.TgZ(71,"span",34),t._uU(72),t.ALo(73,"abpLocalization"),t.qZA()()(),t.TgZ(74,"div",27)(75,"div",28)(76,"label",29),t._uU(77),t.ALo(78,"abpLocalization"),t.qZA(),t.TgZ(79,"div",30),t._UZ(80,"ngx-intl-tel-input",45)(81,"i",32),t.ALo(82,"abpLocalization"),t.qZA(),t.TgZ(83,"span",34),t._uU(84),t.ALo(85,"abpLocalization"),t.qZA()()(),t.TgZ(86,"div",27)(87,"div",28)(88,"label",29),t._uU(89),t.ALo(90,"abpLocalization"),t.qZA(),t.TgZ(91,"ng-select",46),t.ALo(92,"abpLocalization"),t.YNc(93,z,5,2,"ng-template",47),t.qZA()()()()()(),t.TgZ(94,"div",22)(95,"div",23)(96,"p",24),t._uU(97),t.ALo(98,"abpLocalization"),t.qZA()(),t.TgZ(99,"div",25)(100,"div",26)(101,"div",27)(102,"div",48),t._UZ(103,"input",49),t.TgZ(104,"label",50),t._uU(105),t.ALo(106,"abpLocalization"),t.qZA()()(),t.YNc(107,E,9,6,"div",51)(108,I,9,6,"div",52),t.qZA()()(),t.TgZ(109,"div",53)(110,"div",23)(111,"p",24),t._uU(112),t.ALo(113,"abpLocalization"),t.qZA()(),t.TgZ(114,"div",25)(115,"div",26)(116,"div",27)(117,"div",28)(118,"label",29),t._uU(119),t.ALo(120,"abpLocalization"),t.qZA(),t._UZ(121,"input",54),t.qZA()(),t.TgZ(122,"div",27)(123,"div",28)(124,"label",29),t._uU(125),t.ALo(126,"abpLocalization"),t.qZA(),t._UZ(127,"input",55),t.ALo(128,"abpLocalization"),t.qZA()(),t.TgZ(129,"div",27)(130,"div",28)(131,"label",29),t._uU(132),t.ALo(133,"abpLocalization"),t.qZA(),t._UZ(134,"input",56),t.ALo(135,"abpLocalization"),t.qZA()(),t.TgZ(136,"div",27)(137,"div",37)(138,"label",29),t._uU(139),t.ALo(140,"abpLocalization"),t.qZA(),t.TgZ(141,"ng-select",57),t.NdJ("ngModelChange",function(a){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedCity=a)}),t.ALo(142,"abpLocalization"),t.YNc(143,J,4,2,"ng-template",47)(144,w,4,2,"ng-template",58),t.qZA()()()()()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(4),t.Oqu(t.lcZ(5,51,"General::mainInfo")),t.xp6(7),t.Oqu(t.lcZ(12,53,"General::customerName")),t.xp6(4),t.s9C("ngbTooltip",t.lcZ(16,55,"General::customerName")),t.xp6(5),t.Oqu(t.lcZ(21,57,"General::customerKey")),t.xp6(4),t.Oqu(t.lcZ(25,59,"General::customerKeyHint")),t.xp6(5),t.Oqu(t.lcZ(30,61,"General::customerDescription")),t.xp6(2),t.s9C("placeholder",t.lcZ(32,63,"General::customerDescriptionPlaceholder")),t.xp6(7),t.Oqu(t.lcZ(39,65,"General::customerSince")),t.xp6(10),t.Oqu(t.lcZ(49,67,"General::joinedSubnowOn")),t.xp6(10),t.Oqu(t.lcZ(59,69,"General::contactInfo")),t.xp6(7),t.Oqu(t.lcZ(66,71,"General::customerEmail")),t.xp6(4),t.s9C("ngbTooltip",t.lcZ(70,73,"General::customerEmailTooltip")),t.xp6(3),t.Oqu(t.lcZ(73,75,"General::customerEmailHint")),t.xp6(5),t.Oqu(t.lcZ(78,77,"General::customerPhone")),t.xp6(3),t.Q6J("cssClass","custom-tel-input")("preferredCountries",e.preferredCountries)("onlyCountries",e.countries)("enableAutoCountrySelect",!0)("enablePlaceholder",!0)("cssClass","form-control")("searchCountryFlag",!0)("searchCountryField",t.WLB(107,F,e.SearchCountryField.Iso2,e.SearchCountryField.Name))("selectFirstCountry",!1)("selectedCountryISO",e.CountryISO.SaudiArabia)("maxLength",20)("phoneValidation",!0)("separateDialCode",!0)("numberFormat",e.PhoneNumberFormat.National),t.xp6(),t.s9C("ngbTooltip",t.lcZ(82,79,"General::customerPhoneTooltip")),t.xp6(3),t.Oqu(t.lcZ(85,81,"General::customerPhoneHint")),t.xp6(5),t.Oqu(t.lcZ(90,83,"General::preferredLanguage")),t.xp6(2),t.s9C("placeholder",t.lcZ(92,85,"General::preferredLanguage")),t.Q6J("items",e.languageList)("clearable",!1),t.xp6(6),t.Oqu(t.lcZ(98,87,"General::mainInfo")),t.xp6(8),t.Oqu(t.lcZ(106,89,"General::isABusiness")),t.xp6(2),t.Q6J("ngIf",e.form.get("isBusiness").value),t.xp6(),t.Q6J("ngIf",e.form.get("isBusiness").value),t.xp6(4),t.Oqu(t.lcZ(113,91,"General::address")),t.xp6(7),t.Oqu(t.lcZ(120,93,"General::address")),t.xp6(6),t.Oqu(t.lcZ(126,95,"General::city")),t.xp6(2),t.s9C("placeholder",t.lcZ(128,97,"General::city")),t.xp6(5),t.Oqu(t.lcZ(133,99,"General::stateProvince")),t.xp6(2),t.s9C("placeholder",t.lcZ(135,101,"General::state")),t.xp6(5),t.Oqu(t.lcZ(140,103,"General::country")),t.xp6(2),t.s9C("placeholder",t.lcZ(142,105,"General::country")),t.Q6J("ngModelOptions",t.DdM(110,M))("ngModel",e.selectedCity)("items",e.countryList)("clearable",!1)}}function P(o,n){1&o&&t._uU(0,"Second content")}function V(o,n){1&o&&t._uU(0,"Second content")}function Y(o,n){1&o&&t._uU(0,"Second content")}let D=(()=>{class o{constructor(e,i,a,l,u,Z,A,g){this._fb=e,this._categoryService=i,this._customerService=a,this._countryService=l,this._localizationService=u,this.toastr=Z,this.calendar=A,this.cd=g,this.activeModal=(0,t.f3M)(c.Kz),this.isLoading=!1,this.active=1,this.SearchCountryField=d.wX,this.CountryISO=d.HT,this.PhoneNumberFormat=d.M9.International,this.preferredCountries=[d.HT.SaudiArabia],this.countries=[],this.phoneInitiated=!1,this.languageList=[],this.countryList=[],this.disabledButton=!1}ngOnInit(){this.initForm(),this.languageList=[{id:"0",code:"EN",name:"English"},{id:"1",code:"AR",name:"Arabic"}],this.getOnlyCountries(),this.getCountryList()}getOnlyCountries(){this.countries=Object.keys(d.HT).map(e=>d.HT[e]).filter(e=>"il"!=e&&"ir"!=e)}getCountryList(){this._countryService.getAll().subscribe(e=>{this.countryList=e?.items,this.selectedCity=!0===this.isEdit?this.countryList?.filter(i=>i?.id===this.customer?.countryId)[0]?.id:this.countryList?.filter(i=>"fbc691ae-a106-42d6-bb86-467bbde9b8a7"===i?.id)[0]?.id})}initForm(){this.form=this._fb.group(!0===this.isEdit?{name:[this.customer?.name,s.Validators.required],customerKey:[{value:this.customer?.customerKey,disabled:!0},s.Validators.required],email:[this.customer?.email],phone:[x(this.customer?.phone)],description:[this.customer?.description,[s.Validators.required,s.Validators.maxLength(250)]],customerStatus:[this.customer?.customerStatus],photo:[this.customer?.photo],customerSince:[L(this.customer?.customerSince),s.Validators.required],joinedSubnow:[{value:L(this.customer?.joinedSubnow),disabled:!0},s.Validators.required],preferredLanguage:[this.customer?.preferredLanguage],vatid:[this.customer?.vatid],companyRegistryNumber:[this.customer?.companyRegistryNumber],address:[this.customer?.address,s.Validators.required],isBusiness:[this.customer?.isBusiness],city:[this.customer?.city,s.Validators.required],stateProvince:[this.customer?.stateProvince,s.Validators.required],countryId:[this?.customer?.countryId,s.Validators.required],tags:[this.customer?.tags],customerSource:[this.customer?.customerSource]}:{name:[this.customer?.name,s.Validators.required],customerKey:[this.customer?.customerKey,s.Validators.required],email:[this.customer?.email,[s.Validators.required,s.Validators.email]],phone:[this?.customer?.phone],description:[this.customer?.description,[s.Validators.required,s.Validators.maxLength(250)]],customerStatus:[0],photo:[""],customerSince:[this.customer?.customerSince,s.Validators.required],joinedSubnow:[{value:this.calendar.getToday(),disabled:!0},s.Validators.required],preferredLanguage:["English"],vatid:["0"],companyRegistryNumber:["0"],address:[this.customer?.address,s.Validators.required],isBusiness:[!1],city:[this.customer?.city,s.Validators.required],stateProvince:[this.customer?.stateProvince,s.Validators.required],countryId:[this?.customer?.countryId,s.Validators.required],tags:[""],customerSource:[0]})}closeModal(){this.activeModal.close()}createEditCustomer(){if(!this.form)return;const{id:e}=this?.customer||{},i={customerKey:this.form.get("customerKey").value,name:this.form.get("name").value,email:this.form.get("email").value,phone:this.form.get("phone").value?.internationalNumber,description:this.form.get("description").value,customerStatus:this.form.get("customerStatus").value,photo:this.form.get("photo").value,customerSince:_(this.form.get("customerSince").value),joinedSubnow:_(this.form.get("joinedSubnow").value),preferredLanguage:this.form.get("preferredLanguage").value,vatid:this.form.get("vatid").value,companyRegistryNumber:this.form.get("companyRegistryNumber").value,address:this.form.get("address").value,isBusiness:this.form.get("isBusiness").value,city:this.form.get("city").value,stateProvince:this.form.get("stateProvince").value,countryId:this.form.get("countryId").value,tags:this.form.get("tags").value,customerSource:this.form.get("customerSource").value},a={id:e,name:this.form.get("name").value,email:this.form.get("email").value,phone:this.form.get("phone").value?.internationalNumber,description:this.form.get("description").value,customerStatus:this.form.get("customerStatus").value,photo:this.form.get("photo").value,preferredLanguage:this.form.get("preferredLanguage").value,vatid:this.form.get("vatid").value,companyRegistryNumber:this.form.get("companyRegistryNumber").value,address:this.form.get("address").value,isBusiness:this.form.get("isBusiness").value,city:this.form.get("city").value,stateProvince:this.form.get("stateProvince").value,countryId:this.form.get("countryId").value,tags:this.form.get("tags").value,customerSource:this.form.get("customerSource").value};(e?this._customerService.update(a):this._customerService.create(i)).pipe((0,T.x)(()=>this.isLoading=!1)).subscribe(l=>{this.toastr.success(this._localizationService.instant(e?"General::customerEditMsg":"General::customerAddMsg"),"",{timeOut:1e3}),this.activeModal.close(l)})}ngAfterViewInit(){if(this.cd.detectChanges(),this.countryList&&this.countryList.length>0){const e=this.countryList.filter(i=>i.id===(this.isEdit?this.customer?.countryId:"fbc691ae-a106-42d6-bb86-467bbde9b8a7"));e.length>0?this.selectedCity=e[0].id:(console.warn("No matching country found"),this.selectedCity=this.countryList[0].id)}}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(s.qu),t.Y36(S.H),t.Y36(C),t.Y36(N),t.Y36(p.oQ8),t.Y36(U._W),t.Y36(c.vL),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-edit-customer"]],inputs:{customer:"customer",isEdit:"isEdit"},decls:46,vars:22,consts:[[1,"modal-header"],[1,"container"],[1,"modal-header-wrapper"],[1,"modal-close",3,"click"],[1,"fa","fa-xmark"],[1,"title"],[4,"ngIf"],["type","submit",1,"btn","btn-save",3,"disabled","click"],[1,"modal-body"],[1,"modal-body-wrapper"],["ngbNav","",1,"custom-nav-tabs","nav-tabs","custom-width"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],[1,"icon","fa-regular","fa-address-card"],["ngbNavContent",""],["ngbNavItem","",3,"disabled"],[1,"fa-regular","fa-file-lines","icon"],[1,"fa-solid","fa-file-invoice","icon"],[1,"fa-solid","fa-chart-column","icon"],[3,"ngbNavOutlet"],[1,"form","section-form",3,"formGroup"],[1,"row","g-0","pb-32","border-bottom"],[1,"col-lg-3","col-md-12"],[1,"form-name"],[1,"col-lg-9","col-md-12"],[1,"row"],[1,"col-lg-8","col-md-12"],[1,"form-group"],[1,"form-label"],[1,"control-icon"],["formControlName","name","id","name","placeholder","Mike Johnson","type","text","required","",1,"form-control"],["tooltipClass","custom-tooltip","placement","top","container","body",1,"icon","fa-regular","fa-circle-question",3,"ngbTooltip"],["formControlName","customerKey","id","customerKey","placeholder","MikeJohnson@gmail.com","type","text","required","",1,"form-control",3,"keydown.space"],[1,"control-hint"],["formControlName","description","id","description","rows","2","required","",1,"form-control",3,"placeholder"],[1,"col-lg-6","col-md-12"],[1,"form-group","mb-0"],["placeholder","dd/mm/yyyy","name","dp","ngbDatepicker","","formControlName","customerSince",1,"form-control","input-date",3,"focus"],["d","ngbDatepicker"],[1,"icon",3,"click"],[1,"fa-regular","fa-calendar"],["placeholder","dd/mm/yyyy","name","dp","ngbDatepicker","","formControlName","joinedSubnow",1,"form-control","input-date"],[1,"icon"],["formControlName","email","id","email","placeholder","MikeJohnson@gmail.com","type","email","required","",1,"form-control"],["name","phone","formControlName","phone","id","phone",3,"cssClass","preferredCountries","onlyCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","phoneValidation","separateDialCode","numberFormat"],["formControlName","preferredLanguage","bindLabel","name","bindValue","name",1,"select-lang",3,"items","placeholder","clearable"],["ng-label-tmp",""],[1,"form-check","form-switch","customer-check"],["type","checkbox","id","isABusiness","formControlName","isBusiness",1,"form-check-input"],["for","isABusiness",1,"form-check-label"],["class","mt-16 col-lg-8 col-md-12",4,"ngIf"],["class","col-lg-8 col-md-12",4,"ngIf"],[1,"row","g-0"],["formControlName","address","id","address","placeholder","100 Smith Street","type","text","required","",1,"form-control"],["formControlName","city","id","city","type","text","required","",1,"form-control",3,"placeholder"],["formControlName","stateProvince","id","stateProvince","type","text","required","",1,"form-control",3,"placeholder"],["formControlName","countryId","bindLabel","name","bindValue","id",1,"select-country",3,"ngModelOptions","ngModel","items","placeholder","clearable","ngModelChange"],["ng-option-tmp",""],[1,"info"],[1,"code"],[1,"name"],[1,"mt-16","col-lg-8","col-md-12"],["formControlName","companyRegistryNumber","id","companyRegistryNumber","type","text","required","",1,"form-control"],["formControlName","vatid","id","vatid","type","text","required","",1,"form-control"],[1,"country"],[1,"img-fluid",3,"src"]],template:function(i,a){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),t.NdJ("click",function(){return a.closeModal()}),t._UZ(4,"i",4),t.qZA(),t.TgZ(5,"h2",5),t.YNc(6,G,2,1,"span",6)(7,O,3,3,"span",6),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){return a.createEditCustomer()}),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"abpLocalization"),t.qZA()()()()(),t.TgZ(12,"div",8)(13,"div",1)(14,"div",9)(15,"ul",10,11)(17,"li",12)(18,"button",13),t._UZ(19,"i",14),t.TgZ(20,"span"),t._uU(21),t.ALo(22,"abpLocalization"),t.qZA()(),t.YNc(23,k,145,111,"ng-template",15),t.qZA(),t.TgZ(24,"li",16)(25,"button",13),t._UZ(26,"i",17),t.TgZ(27,"span"),t._uU(28),t.ALo(29,"abpLocalization"),t.qZA()(),t.YNc(30,P,1,0,"ng-template",15),t.qZA(),t.TgZ(31,"li",16)(32,"button",13),t._UZ(33,"i",18),t.TgZ(34,"span"),t._uU(35),t.ALo(36,"abpLocalization"),t.qZA()(),t.YNc(37,V,1,0,"ng-template",15),t.qZA(),t.TgZ(38,"li",16)(39,"button",13),t._UZ(40,"i",19),t.TgZ(41,"span"),t._uU(42),t.ALo(43,"abpLocalization"),t.qZA()(),t.YNc(44,Y,1,0,"ng-template",15),t.qZA()(),t._UZ(45,"div",20),t.qZA()()()),2&i){const l=t.MAs(16);t.xp6(6),t.Q6J("ngIf",null==a.customer?null:a.customer.name),t.xp6(),t.Q6J("ngIf",!(null!=a.customer&&a.customer.name)),t.xp6(),t.Q6J("disabled",!a.form.valid),t.xp6(2),t.Oqu(t.lcZ(11,12,"General::save")),t.xp6(11),t.hij(" ",t.lcZ(22,14,"General::info")," "),t.xp6(3),t.Q6J("disabled",!0),t.xp6(4),t.hij(" ",t.lcZ(29,16,"General::subscription")," "),t.xp6(3),t.Q6J("disabled",!0),t.xp6(4),t.Oqu(t.lcZ(36,18,"General::invoices")),t.xp6(3),t.Q6J("disabled",!0),t.xp6(4),t.hij("",t.lcZ(43,20,"General::logs")," "),t.xp6(3),t.Q6J("ngbNavOutlet",l)}},dependencies:[m.O5,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.Q7,s.sg,s.u,f.hL,f.J5,c._L,h.w9,h.ir,h.mR,c.uN,c.Pz,c.nv,c.Is,c.Fh,c.tO,c.Dy,c.J4,d.FV,d.mh,p.fuE]})}return o})();var Q=r(2913),j=r(5668),y=r(7956);function B(o,n){if(1&o&&(t.TgZ(0,"div",9)(1,"span",23),t._UZ(2,"i",24),t.qZA(),t.TgZ(3,"span",8),t._uU(4),t.qZA()()),2&o){const e=n.item;t.xp6(4),t.Oqu(null==e?null:e.name)}}function R(o,n){1&o&&(t.TgZ(0,"div"),t._UZ(1,"app-not-found-data-standalone"),t.qZA())}function K(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sortData())}),t.qZA()}}function H(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.unSortdata())}),t.qZA()}}function $(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",41)(1,"td",42),t.ALo(2,"abpLocalization"),t.TgZ(3,"div",43)(4,"div",44),t._uU(5),t.qZA(),t.TgZ(6,"div",9)(7,"span",8),t._uU(8),t.qZA(),t.TgZ(9,"span",45),t._uU(10),t.qZA()()()(),t.TgZ(11,"td",42),t.ALo(12,"abpLocalization"),t.TgZ(13,"div",43)(14,"div",9)(15,"span",8),t._uU(16),t.qZA(),t.TgZ(17,"span",45),t._uU(18),t.qZA()()()(),t.TgZ(19,"td",42),t.ALo(20,"abpLocalization"),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"td",42),t.ALo(24,"abpLocalization"),t._uU(25),t.ALo(26,"date"),t.qZA(),t.TgZ(27,"td",46)(28,"a",47),t.NdJ("click",function(){const a=t.CHM(e),l=a.$implicit,u=a.index,Z=t.oxw(2);return t.KtG(Z.addEditCustomer(l,u,"edit"))}),t._UZ(29,"i",48),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(),t.uIk("data-label",t.lcZ(2,11,"General::customer")),t.xp6(4),t.Oqu(null==e?null:e.name.substring(0,2)),t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.customerKey),t.xp6(),t.uIk("data-label",t.lcZ(12,13,"General::plan")),t.xp6(5),t.Oqu(null==e?null:e.planName),t.xp6(2),t.Oqu(null==e?null:e.planCode),t.xp6(),t.uIk("data-label",t.lcZ(20,15,"General::dateJoined")),t.xp6(2),t.hij(" ",t.xi3(22,17,null==e?null:e.joinedSubnow,"MMM dd, yyyy")," "),t.xp6(2),t.uIk("data-label",t.lcZ(24,20,"General::subscriptionExpiry")),t.xp6(2),t.hij(" ",t.xi3(26,22,null==e?null:e.subscribtionExpiryDate,"MMM dd, yyyy")," ")}}function W(o,n){if(1&o&&(t.TgZ(0,"div",25)(1,"table",26)(2,"thead",27)(3,"tr",28)(4,"th",29)(5,"div",30)(6,"span"),t._uU(7),t.ALo(8,"abpLocalization"),t.qZA(),t.YNc(9,K,1,0,"a",31)(10,H,1,0,"a",32),t.qZA()(),t.TgZ(11,"th",33),t._uU(12),t.ALo(13,"abpLocalization"),t.qZA(),t.TgZ(14,"th",34),t._uU(15),t.ALo(16,"abpLocalization"),t.qZA(),t.TgZ(17,"th",35),t._uU(18),t.ALo(19,"abpLocalization"),t.qZA(),t._UZ(20,"th",36),t.qZA()(),t.TgZ(21,"tbody",37),t.YNc(22,$,30,25,"tr",38),t.qZA()()()),2&o){const e=t.oxw();t.xp6(7),t.Oqu(t.lcZ(8,7,"General::customer")),t.xp6(2),t.Q6J("ngIf",!e.isSort),t.xp6(),t.Q6J("ngIf",e.isSort),t.xp6(2),t.Oqu(t.lcZ(13,9,"General::plan")),t.xp6(3),t.Oqu(t.lcZ(16,11,"General::dateJoined")),t.xp6(3),t.hij(" ",t.lcZ(19,13,"General::subscriptionExpiry"),""),t.xp6(4),t.Q6J("ngForOf",e.customerList)}}const X=[{path:"",component:q,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,i,a){this._customerService=e,this._planServices=i,this._fb=a,this.modalService=(0,t.f3M)(c.FF),this.customerList=[],this.isEdit=!1,this.planList=[],this.statusList=[],this.isSort=!1}ngOnInit(){this.getCustomerList(),this.getPlanName(),this.initForm()}initForm(){this.form=this._fb.group({status:[null],plan:["All"],searchTerm:[""]})}onChangeFilter(e){this._customerService.getFilteredCustomers(this?.form.value).subscribe(i=>{this.customerList=i})}sortData(){this._customerService.getList({sorting:"name",maxResultCount:1e3}).subscribe(e=>{this.customerList=e?.items,this.isSort=!0})}unSortdata(){this._customerService.getList({maxResultCount:1e3}).subscribe(e=>{this.customerList=e?.items,this.isSort=!1})}getPlanName(){this._planServices.getPlanName().subscribe(e=>{this.planList=e,this.planList.unshift({name:"All"})})}getCustomerList(){this._customerService.getList({maxResultCount:1e3}).subscribe(e=>{this.customerList=e?.items,this.totalCustomer=e?.totalCount})}addEditCustomer(e,i,a){this.isEdit="edit"===a;const l={id:e?.id,customerKey:e?.customerKey,name:e?.name,email:e?.email,phone:e?.phone,description:e?.description,customerStatus:e?.customerStatus,photo:e?.photo,customerSince:e?.customerSince,joinedSubnow:e?.joinedSubnow,preferredLanguage:e?.preferredLanguage,vatid:e?.vatid,companyRegistryNumber:e?.companyRegistryNumber,address:e?.address,isBusiness:e?.isBusiness,city:e?.city,stateProvince:e?.stateProvince,countryId:e?.countryId,tags:e?.tags,customerSource:e?.customerSource},u=this.modalService.open(D,{fullscreen:!0,windowClass:"custom-modal"});u.componentInstance.customer=l,u.componentInstance.isEdit=this.isEdit,u.result.then(g=>{this.getCustomerList()}),u.closed.subscribe(g=>{g&&("number"==typeof i?(this.customerList?.splice(i,1,g),this.isEdit=!0):this.customerList?.push(this.customerList))}).unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(C),t.Y36(Q.D),t.Y36(s.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-customer-list"]],decls:37,vars:27,consts:[[1,"customer"],[1,"section-header","border-0","pb-0"],[3,"title"],[1,"section-header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fa-regular","fa-plus"],[1,"section-body"],[1,"total-customer"],[1,"name"],[1,"info"],[1,"table-filter-wrapper"],[1,"filter"],[1,"form","row","g-0",3,"formGroup"],[1,"col-lg-4","col-md-6"],[1,"form-label"],[1,"input-search"],[1,"icon","fa-search","fa-solid"],["type","text","formControlName","searchTerm",1,"form-control",3,"placeholder","input"],[1,"col-lg-2","col-md-6"],["formControlName","plan","bindLabel","name","bindValue","name",1,"select-dot",3,"items","placeholder","clearable"],["ng-label-tmp",""],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"dot","text-primary"],[1,"fa-solid","fa-circle"],[1,"table-responsive"],[1,"rounded-table"],[1,"rounded-table-head"],[1,"rounded-table-head-row"],["width","386",1,"rounded-table-head-cell"],[1,"sort-cell"],["class","sort fa-solid fa-arrow-down",3,"click",4,"ngIf"],["class","sort fa-solid fa-arrow-up",3,"click",4,"ngIf"],["width","210",1,"rounded-table-head-cell"],["width","140",1,"rounded-table-head-cell"],["width","160",1,"rounded-table-head-cell"],["width","70",1,"rounded-table-head-cell"],[1,"rounded-table-body"],["class","rounded-table-body-row",4,"ngFor","ngForOf"],[1,"sort","fa-solid","fa-arrow-down",3,"click"],[1,"sort","fa-solid","fa-arrow-up",3,"click"],[1,"rounded-table-body-row"],[1,"rounded-table-body-cell"],[1,"cell-name"],[1,"avatar"],[1,"code"],[1,"rounded-table-body-cell","cell-action"],[3,"click"],[1,"fa-solid","fa-pen"]],template:function(i,a){1&i&&(t.TgZ(0,"section",0)(1,"div",1),t._UZ(2,"app-page-title-standalone",2),t.ALo(3,"abpLocalization"),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return a.addEditCustomer()}),t._UZ(6,"i",5),t.TgZ(7,"span"),t._uU(8),t.ALo(9,"abpLocalization"),t.qZA()()()(),t.TgZ(10,"div",6)(11,"div",7)(12,"p",8),t._uU(13),t.ALo(14,"abpLocalization"),t.qZA(),t.TgZ(15,"span",9),t._uU(16),t.qZA()(),t.TgZ(17,"div",10)(18,"div",11)(19,"form",12)(20,"div",13)(21,"label",14),t._uU(22),t.ALo(23,"abpLocalization"),t.qZA(),t.TgZ(24,"div",15),t._UZ(25,"i",16),t.TgZ(26,"input",17),t.NdJ("input",function(u){return a.onChangeFilter(u)}),t.ALo(27,"abpLocalization"),t.qZA()()(),t.TgZ(28,"div",18)(29,"label",14),t._uU(30),t.ALo(31,"abpLocalization"),t.qZA(),t.TgZ(32,"ng-select",19),t.ALo(33,"abpLocalization"),t.YNc(34,B,5,1,"ng-template",20),t.qZA()()()(),t.YNc(35,R,2,0,"div",21)(36,W,23,15,"div",22),t.qZA()()()),2&i&&(t.xp6(2),t.s9C("title",t.lcZ(3,13,"General::customers")),t.xp6(6),t.Oqu(t.lcZ(9,15,"General::addCustomer")),t.xp6(5),t.Oqu(t.lcZ(14,17,"General::totalCustomerAccounts")),t.xp6(3),t.Oqu(a.totalCustomer),t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(3),t.Oqu(t.lcZ(23,19,"General::searchForOrder")),t.xp6(4),t.s9C("placeholder",t.lcZ(27,21,"General::search")),t.xp6(4),t.Oqu(t.lcZ(31,23,"General::plan")),t.xp6(2),t.s9C("placeholder",t.lcZ(33,25,"General::plan")),t.Q6J("items",a.planList)("clearable",!1),t.xp6(3),t.Q6J("ngIf",!a.customerList.length),t.xp6(),t.Q6J("ngIf",a.customerList.length))},dependencies:[m.sg,m.O5,j.P,y.G,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,f.hL,f.J5,h.w9,h.mR,d.mh,m.uU,p.fuE]})}return o})()}]}];let tt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[b.Bz.forChild(X),b.Bz]})}return o})();var et=r(6208);let ot=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[m.ez,tt,y.G,et.m]})}return o})()}}]);